{"componentChunkName":"component---src-templates-question-js","path":"/global-window/","result":{"data":{"site":{"siteMetadata":{"title":"1977 JavaScript Quizzes","author":"duthaho","siteUrl":"https://quiz.duthaho.com","social":{"facebook":{"appId":"1476613389154628"}}}},"markdownRemark":{"id":"e7ac9348-6531-59c9-8f94-574d87690d88","excerpt":"Kết quả là gì? Đoạn code này trông có vẻ đơn giản, nếu biến global  chưa có phần tử  thì định nghĩa biến , gán cho nó bằng . Bạn sẽ nghĩ kết quả là , nhưng…","html":"<p>Kết quả là gì?</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a\"</span> <span class=\"token keyword\">in</span> window<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> a <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<!-- explanation -->\n<p>Đoạn code này trông có vẻ đơn giản, nếu biến global <code class=\"language-text\">window</code> chưa có phần tử <code class=\"language-text\">a</code> thì định nghĩa biến <code class=\"language-text\">a</code>, gán cho nó bằng <code class=\"language-text\">1</code>. Bạn sẽ nghĩ kết quả là <code class=\"language-text\">1</code>, nhưng không, đáp án đúng là <code class=\"language-text\">undefined</code>, điều gì đang xảy ra? Cùng đi qua 3 điểm dưới đây sẽ rõ.</p>\n<p>Đầu tiên, tất cả các biến global được lưu trữ trong global object là <code class=\"language-text\">window</code> (ở browser). Khi chúng ta khai báo <code class=\"language-text\">var a = 1</code> điều đó đồng nghĩa với việc khai báo <code class=\"language-text\">window.a = 1</code>, và chúng ta có thể kiểm tra 1 biến có phải là global hay nằm trong object window hay không bằng cách <code class=\"language-text\">&quot;variable-name in window&quot;</code>. Vậy sau khi khai báo <code class=\"language-text\">var a = 1</code> thì <code class=\"language-text\">&quot;a&quot; in window</code> cho kết quả <code class=\"language-text\">true</code>.</p>\n<p>Thứ hai, JavaScript có cơ chế <code class=\"language-text\">hoisted</code>, tất cả các khai báo biến đều được đưa lên đầu của scope của nó. Ví dụ:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a\"</span> <span class=\"token keyword\">in</span> window<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> a<span class=\"token punctuation\">;</span></code></pre></div>\n<p>Tuy biến <code class=\"language-text\">a</code> được khai báo dưới dòng <code class=\"language-text\">console</code> nhưng kết quả in ra là <code class=\"language-text\">true</code>, vì JavaScript engine sẽ lần lượt tìm tất cả các khai báo biến và chuyển chúng lên đầu của scope. Vì thế đoạn code được thực thi có thể viết lại như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> a<span class=\"token punctuation\">;</span>\n<span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a\"</span> <span class=\"token keyword\">in</span> window<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Thứ ba là chỉ các khai báo biến mới được <code class=\"language-text\">hoisted</code>, còn các khởi tạo, gán giá trị cho biến thì không. Ví dụ:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> a <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>thì chúng ta có 2 quá trình:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> a<span class=\"token punctuation\">;</span>    <span class=\"token comment\">//declaration</span>\na <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>    <span class=\"token comment\">//initialization</span></code></pre></div>\n<p>Tóm lại, với sự hiểu biết của 3 khái niệm trên thì đoạn code ban đầu được thực thi như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> a<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a\"</span> <span class=\"token keyword\">in</span> window<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    a <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>và tất nhiên, kết quả là <code class=\"language-text\">undefined</code>.</p>","frontmatter":{"title":"Global window","answers":["undefined // correct","1","Reference Error"],"date":"2020-02-11"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/global-window/","previous":{"fields":{"slug":"/function-agruments/"},"frontmatter":{"title":"Function Agruments","date":"2020-02-11"}},"next":null}}}